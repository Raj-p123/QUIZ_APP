<div class="quizzes-page">

  <!-- üî• HEADER SECTION -->
  <div class="quizzes-header">

    <div class="header-left">
      <button class="back-btn" (click)="goBack()">‚Üê</button>
      <div>
        <h1>Available Quizzes</h1>
        <p>Find your next challenge and level up</p>
      </div>
    </div>

    <div class="search-wrapper">
      <span>üîç</span>
      <input 
        type="text" 
        placeholder="Search quizzes..." 
        [(ngModel)]="searchText"
        (input)="onSearchChange()"
      >
    </div>

  </div>

  <!-- üî• QUIZ GRID -->
  <ng-container *ngIf="filteredQuizzes$ | async as quizzes; else loading">
    <div class="quiz-grid-modern" *ngIf="quizzes.length > 0; else noQuizzes">

      <!-- üî• CLICK ANYWHERE ‚Üí OVERVIEW -->
      <div class="quiz-card-modern"
           *ngFor="let q of quizzes"
           (click)="openQuiz(q.id)">

        <div class="quiz-image">
          <img 
            [src]="getImage(q.coverImageUrl)" 
            (error)="handleImageError($event)"
          >
          <div class="quiz-badge">Intermediate</div>
        </div>

        <div class="quiz-content">
          <h3>{{ q.title }}</h3>

          <div class="quiz-info">
            <span>‚è± {{ extractTime(q.details) }}</span>
            <span>‚ùì {{ extractQuestions(q.details) }}</span>
          </div>

          <!-- No stopPropagation needed -->
          <button class="start-btn">
            Start Quiz
          </button>
        </div>

      </div>

    </div>
  </ng-container>

  <!-- STATES -->
  <ng-template #loading>
    <div class="state-box">
      <div class="spinner"></div>
      <p>Loading quizzes...</p>
    </div>
  </ng-template>

  <ng-template #noQuizzes>
    <div class="state-box">
      <h3>No quizzes found</h3>
      <p>Try searching something else.</p>
    </div>
  </ng-template>

</div>